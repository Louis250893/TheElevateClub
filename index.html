<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>The Elevate Club – Invitation privée</title>

  <!-- Responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Couleurs navigateur / mobile -->
  <meta name="theme-color" content="#000000" />

  <!-- Icônes & PWA (fichiers déjà dans ton repo) -->
  <link rel="icon" type="image/png" href="favicon.ico" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="manifest" href="manifest.json" />

  <!-- Police Playfair & manuscrite (Great Vibes pour l'effet "écriture") -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500&family=Great+Vibes&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --gold: #e0c07a;
      --bg: #020202;
      --text: #f5f5f5;
      --input-bg: #111;
      --input-border: #333;
      --input-focus: #e0c07a;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: "Playfair Display", serif;
      background: radial-gradient(circle at top, #181818 0, #000 55%, #000 100%);
      color: var(--text);
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .wrap {
      width: 100%;
      max-width: 900px;
      padding: 24px 16px 40px;
      margin: 0 auto;
    }

    .card {
      max-width: 700px;
      margin: 0 auto;
      padding: 32px 20px 28px;
      border-radius: 18px;
      background: radial-gradient(circle at top, #101010 0, #050505 60%, #020202 100%);
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(224, 192, 122, 0.15);
    }

    /* LOGO */
    .logo-wrapper {
      display: flex;
      justify-content: center;
      margin-bottom: 24px;
    }

    .logo {
      width: min(65vw, 260px);
      height: auto;
      display: block;
      image-rendering: auto;
    }

    /* TEXTE MANUSCRIT ANIMÉ */
    .slogan-container {
      text-align: center;
      margin-bottom: 30px;
      padding: 0 8px;
    }

    #slogan {
      font-family: "Great Vibes", cursive;
      font-size: clamp(1.5rem, 2.5vw + 0.8rem, 2.3rem);
      line-height: 1.4;
      color: var(--gold);
      max-width: 38rem;
      margin: 0 auto;
      white-space: pre-wrap;
      /* pas de curseur, pas de bordure : du texte normal */
    }

    /* FORMULAIRE */
    form {
      margin-top: 16px;
    }

    .field {
      margin-bottom: 14px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 0.85rem;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      color: rgba(245, 245, 245, 0.85);
    }

    input,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 6px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      font-size: 0.95rem;
      font-family: inherit;
      outline: none;
      transition: border-color 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(180, 180, 180, 0.7);
      font-size: 0.9rem;
    }

    input:focus,
    textarea:focus {
      border-color: var(--input-focus);
      box-shadow: 0 0 0 1px rgba(224, 192, 122, 0.55);
      background: #141414;
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    .notice {
      min-height: 1.3em;
      margin-top: 4px;
      margin-bottom: 8px;
      font-size: 0.85rem;
      color: rgba(224, 192, 122, 0.9);
    }

    /* BOUTON */
    .actions {
      margin-top: 10px;
      text-align: center;
    }

    button[type="submit"] {
      padding: 10px 28px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.8);
      background: radial-gradient(circle at 30% 30%, #f8e3a6 0, #f1cb72 32%, #c8953a 65%, #8d5a16 100%);
      color: #1b1205;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.11em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 10px 18px rgba(0, 0, 0, 0.55);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    button[type="submit"]:hover {
      transform: translateY(-1px);
      filter: brightness(1.03);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.65);
    }

    button[type="submit"]:active {
      transform: translateY(0);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.6);
    }

    /* RESPONSIVE */
    @media (max-width: 600px) {
      .card {
        padding: 22px 16px 22px;
      }

      label {
        font-size: 0.78rem;
      }

      input,
      textarea {
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <!-- LOGO FIXE -->
      <div class="logo-wrapper">
        <!-- Ton fichier PNG transparent doit s'appeler exactement "logo.png" -->
        <img src="logo.png" alt="The Elevate Club" class="logo" />
      </div>

      <!-- TEXTE MANUSCRIT ANIMÉ -->
      <div class="slogan-container">
        <p id="slogan"></p>
      </div>

      <!-- MESSAGE D’INFO / ERREUR -->
      <div id="notice" class="notice"></div>

      <!-- FORMULAIRE -->
      <form id="request">
        <div class="field">
          <label for="name">Votre nom</label>
          <input id="name" name="name" type="text" autocomplete="name" required
            placeholder="Nom complet" />
        </div>

        <div class="field">
          <label for="city">Votre ville</label>
          <input id="city" name="city" type="text" autocomplete="address-level2" required
            placeholder="Ville où vous vivez" />
        </div>

        <div class="field">
          <label for="contact">Contact (email / téléphone)</label>
          <input id="contact" name="contact" type="text" autocomplete="email"
            placeholder="ex. nom@example.com ou +32..." required />
        </div>

        <div class="field">
          <label for="words">Trois mots qui vous définissent</label>
          <input id="words" name="words" type="text" required
            placeholder="Par ex. curieux, engagé, généreux" />
        </div>

        <div class="field">
          <label for="note">Optionnel (note, précision, recommandation)</label>
          <textarea id="note" name="note"
            placeholder="Un mot en plus, une recommandation, un contexte…"></textarea>
        </div>

        <div class="actions">
          <button type="submit">Demander l'accès</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    /* -----------------------------------------
       1) Texte manuscrit qui s'écrit sans curseur
    ------------------------------------------*/
    const FULL_SLOGAN =
      "Un espace pour ceux qui avancent vraiment.\n" +
      "Pas pour paraître. Pas pour impressionner.\n" +
      "Pour s'élever, ensemble.";

    function lancerAnimationTexte() {
      const el = document.getElementById("slogan");
      let i = 0;

      function step() {
        if (i <= FULL_SLOGAN.length) {
          el.textContent = FULL_SLOGAN.slice(0, i);
          i++;
          setTimeout(step, 45); // vitesse d'écriture
        }
      }

      step();
    }

    /* -----------------------------------------
       2) Gestion du formulaire + envoi serveur
       (on garde la même logique que ton submit.js)
    ------------------------------------------*/

    // Récupère le parrain dans l'URL (ex: ?parrain=Prénom)
    const PARRAIN = new URLSearchParams(window.location.search).get("parrain") || "NON-DÉFINI";

    async function envoyerVersServeur(data) {
      try {
        const resp = await fetch("/api/submit", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        if (!resp.ok) {
          const txt = await resp.text();
          console.error("Erreur serveur:", resp.status, txt);
          document.getElementById("notice").textContent =
            "Erreur lors de l’envoi (serveur). Réessaie dans un instant.";
          return;
        }

        document.getElementById("notice").textContent = "Candidature envoyée. Merci.";
      } catch (err) {
        console.error(err);
        document.getElementById("notice").textContent = "Problème réseau — réessaie.";
      }
    }

    document.getElementById("request").addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        name: e.target.name.value.trim(),
        city: e.target.city.value.trim(),
        contact: e.target.contact.value.trim(),
        words: e.target.words.value.trim(),
        note: e.target.note.value.trim(),
        parrain: PARRAIN,
      };

      await envoyerVersServeur(data);
      e.target.reset();
    });

    // Lancer l'animation une fois que la page est chargée
    window.addEventListener("load", lancerAnimationTexte);
  </script>
</body>
</html>

